<a href="README.md">◀️<br>back to README.md</a>

<p align="center">
  <a href="#">
    <img src="https://i.imgur.com/K2kZihh.png" height="200">
    <br>
  </a>
  <b>PROUDLY PRESENTED BY</b>
  <br>
  <b><a href="#wp">TEAM WILLPOWER</a></b>
</p>


<h1 align="center">DETAILED SOLUTION</h1>

## Table of Contents

- [Problem Analysis](#problem-analysis)
    * [Preamble](#preamble)
    * [Current Situation](#current-situation)
    * [Limitations](#limitations)
- [Our Solution](#our-solution)
    * [Advantages](#advantages)
    * [How It Can Be Used](#how-it-can-be-used)
    * [Current Limitations And Future Expansions](#current-limitations-and-future-expansions)
- [Conclusion](#conclusion)
<br>

- [Technical Information](#technical-information)
    * [Data Preparation](#1-data-preparation)
    * [Training with Tensorflow](#2a-training-with-tensorflow)
    * [Training with IBM Cloud](#2b-training-with-ibm-cloud)
    * [Creation of Webpage](#3-creation-of-webpage)
    * [Deployment of Model](#4-deployment-of-model)

<br><br>

## Problem Analysis

### Current Situation
Throughout history, there have always been unprecedented events and crises with dire consequences. Recent events such as the COVID pandemic and the unsafe PMD batteries incidents remind us once again that these are possible both on an international and local level. In the past, we have had limited resources to bring change quickly and swiftly to remedy these situations. However, with the advent of rising technology, we are more capable than ever to shorten the action-reaction cycle with regards to such uncertainties. At this stage, we should have the capability to limit these events to non-consequential ones before they blow out of proportion.

Therefore, our team has set out to attempt to stem the spread of such unforeseen circumstances at the earliest onset of symptoms by introducing a means in which the public can be involved in the upstream solution in a swift and effective manner.

<br>

### Limitations
The current method of involving our citizens as part of the upstream solution is mainly done through educational methods such as roadshows, workshops and social media. There have been promising progress made, however our team identified a parallel approach involving technology that can augment the current measures. 

Namely, the limitations of the current measures are:

1. <b>Lack of relatability</b>. Dissemination through formal education or ad-hoc events are based on the concept of rote learning, where knowledge is presented regularly to the citizens, which would serve as a constant reminder. This would ensure that they do not get complacent or forget those teachings. However, citizens might not perceive such information as being relevant as they would have to personally draw parallels to their own lives. Thus, there is a need to make content that is more relatable such that citizens would find it easier to make that connection.
<br>

2. <b>Poor information retention</b>. Current measures do provide a wealth of knowledge on how to react and respond to emergency situations and events. However, in day-to-day lives, the ability of citizens to employ this knowledge is greatly hampered by their limited ability to retain them. They may even find the trouble of finding such information greatly outweigh the benefits they could reap from it. This is why the outreach programmes have always aimed to keep citizens fresh and reminded of these knowledge. This, however, runs the risk of making them desensitised to the messages due to them constantly being bombarded with the same sort of reminders. Therefore, a solution that provides relevant information at their fingertips would greatly increase the effectiveness of the information disseminated.
<br>

3. <b>Slow information flow</b>. The current measures rely on information broadcasted through media sources like newspaper, radios television and word-of-mouth in order to reach the people. This requires the citizens to be actively listening to receive the updates. This delays the action-reaction process as it will take some time before the changes can be seen within the community. Instead, for instance, when there is an indicator that an unsettling trend is on the rise, if we can bring it to the attention of the citizens swiftly and effectively, this trend can be stopped early on and be prevented from carrying on, which might potentially cause more problems further down the line. Hence, a swift and efficient platform which can quickly bring to notice important information to the general population would be an effective upstream preventive measure.

<br>

## Our Solution

Introducing the myDefender app!

Building on from the myResponder app, the myDefender app aims to run parallel with existing measures, providing a means to allow citizens to perform preemptive preventive measures to stem the propagation of worrying trends at the onset. This would prevent potential undesired events or incidents from happening down the line. Together with the current measures, citizens would have the knowledge and skills to both prevent and react to events and crises well.

myDefender utilises the camera within everyone’s smartphones, together with Machine Learning Object Detection capabilities and Augmented Reality, to provide a platform where information and potential issues can be contextualised for the user. It observes the user’s surroundings and gives prompts with relevant information and suggestions that guide the user to check his home for potential hazards, much like an enforcement officer. It empowers individuals with the ability to check their home and surroundings for potential hazards, which complements enforcement efforts from the relevant authorities ie. Fire Safety enforcement.

As an upstream solution which could be emulated in many realms and at different scales, the application ties together the “institutionalisation of safety and public protection” with “community empowerment”, allowing better integration with emergency response measures. Through directly understanding about potential hazards and the actions they should take to prevent these hazards from manifesting into something more consequential, myDefender app perfectly epitomises how events can be turned into non-events, regardless of the magnitude.


<br>

### Advantages

1. <b>Relatability</b>. Compared to learning about hazards in other settings and contexts, the application contextualizes the hazards to the user’s home.The user would thus feel a sense of connection as he has a vested interest in his and his family’s safety. Hence he would more likely be galvanised into self-policing the safety of his own home, therefore consolidating the long term use case for the application.
<br>

2. <b>Information Retention</b>. The app provides all the information that the user might require at their fingertips, allowing an ease of access to the potential hazards. For instance, an individual who recently listened to a message on preventing fires may be on the lookout for potential fire hazards, but may end up overlooking others like dengue. This app analyses the user’s environment to ensure all potential hazards are highlighted, leaving no stones unturned. Furthermore, users will not have to go the extra mile to search for or remember what he learned from workshops etc., which would significantly reduce the disincentive for them to take the required immediate action to rectify the hazard.
<br>

3. <b>Quick information deployment</b>. Upon seeing a trend in certain hazards, the relevant authorities can quickly train and push out a model to detect this potential hazard. A notification will then appear on their smartphone about this update and users can then follow the app’s guidance in checking if they are susceptible to this hazard. This will accelerate the flow of information to the user. Moreover, users do not need to gather more information online about what to do etc., allowing them to tackle the hazards quickly and efficiently.	Essentially, the app would be a one-stop platform through which users are empowered to take charge of mitigating hazards found at home.

<br>

### How It Can Be Used

<b>EXAMPLE 1 (DEMO):</b>
<br><br>
<b>Situation</b>:
During the recent months of COVID-19, precautionary measures against dengue have played second fiddle to the circuit break measures, resulting in an unfortunate increase in the amount of dengue cases locally.
<br><br>
<b>Response</b>:
NEA realises that there is a need to increase awareness for the rise in the case of dengue. They release a new module for the identification of potential mosquito breeding places such as pails and potted plants is trained and deployed onto the webpage. The user is notified about the update and advised to scan his surroundings. It will provide prompts to guide the user as to where he should look. Once the application detects pails with stagnant water, for example, a pop-up will appear to warn them about the danger and advise them to clear the stagnant water.
<br><br>
<b>Benefits</b>:
The user was able to directly see the threats of dengue within their environment and take immediate action to rectify them.

<br><br>

<b>EXAMPLE 2 (DEMO):</b>
<br><br>
<b>Situation</b>:
Despite the downward trend in household fires, there is still a significant number of household fire calls that are attributed to easily preventable problems, including but definitely not limited to the lack of servicing of fire extinguishers.
<br><br>
<b>Response</b>:
SCDF realises that there is a need to increase checks on potential fire hazards. A new module for the identification of fire hazards is trained and deployed onto the webpage. Users are notified and prompted by the application to scan for these potential hazards, such as the serviceability of the fire extinguishers. They will then be advised on the correct action to be taken ie. inform the relevant authorities.
<br><br>
<b>Benefits</b>:
The user was directly involved in the enforcement of checks in his surroundings and contributes to the upstream solution to make events non-events. This helps to build social responsibility amongst the citizens. Not only will it be timely, but SCDF can potentially use this to reduce the manpower needed for enforcement checks.

<br><br>

<b>EXAMPLE 3 (ANOTHER USE CASE):</b>
<br><br>
<b>Situation</b>:
A batch of a recently-released gadget has been found to have a manufacturing defect, not complying with safety regulations and pose a severe fire risk.
<br><br>
<b>Response</b>:
Upon knowledge of this news, the relevant authorities release a module which can identify the batch of faulty gadget in question. Users are notified about a potentially hazardous batch of gadget and are asked whether they have it in their house. Users with these devices can then utilise the app to check the serial number/batch code to verify if their unit is indeed faulty. Should their device be confirmed to be faulty, the users would be given instructions on how to dispose or return them. Users that did miss this notification, but were using this app for other purposes would provide information on this device should it be detected by the application.
<br><br>
<b>Benefits</b>:
Many users of the potentially faulty batch of gadget could be reached, greatly preventing the number of incidents that might have happened should they not have been recalled.


<br>

### Current Limitations And Future Expansions

1. <b>Long-term user retention</b>. Users might treat the application as a one off thing. To tackle this issue, incentives can be provided to entice them to use the app regularly. An example of such would be through gamification, where the user can level up as a ‘Defender’ when he clears the hazards. Another method to address this would be through a reminder system, where the user would be prompted to check for certain hazards every month to ensure that they are still ingrained in the culture of prevention.
<br>

2. <b>Appeal to all age groups</b>. Currently, our app is targeted at the more generic public, and we acknowledge that the outreach to different groups could be limited. For instance, elders who are not tech-savvy might face difficulty in navigating the app and the potential language barrier might undermine the efficacy of conveying our information. Language expansions can be included so that the elders would understand the app better. Child friendly mode with easy to understand text and animations could also be implemented to instill a habit in children since young.

<br>

## Conclusion

As we head into a decade of new frontiers in terms of the nature of the problems we are faced with, so has our technology. Our team believes that with the uncertainties that lie ahead, the only certain is that technology will become more paramount than ever in tackling what may come in our way. 

myDefender encapsulates this clearly, by reinventing the way information is deployed and bringing ongoing issues and potential dangers closer to home. As mentioned, we believe that such means of educating the public are much more effective in galvanising users to remedy problems, if any, around them. With emphasis on individual responsibilities, myDefender aims to augment existing measures. Through myDefender, we will be able to greatly increase the depth and reach of current measures by encouraging users to take steps in stemming potential dangers at its earliest onset.

That said, myDefender is not only an application leveraging on Machine Learning Object Detection capabilities and Augmented Reality to disseminate important safety tips and empower users to effect changes — it also serves as an expandable model built upon the core idea of community resilience and preparedness. With technology as its enabler, it bridges the gaps between institutionalised safety precautions, community empowerment and emergency response, thereby providing  a comprehensive upstream solution which can be emulated in many other areas, wildfires and COVID-19 alike.

<br><br>

<br><br>

## Technical Information

### 1. Data Preparation
- A web crawler was used to obtain images of our desired object to detect.
- The images are annotated with [LabelImg] to generate .xml files for the bounding boxes.

<br>

### 2a. Training with Tensorflow
- Set up the virtual environment for training, remembering to install Nvidia's CUDA Toolkit, as well as its Deep Neural Network library (cuDNN).
- Initialise the Tensorflow [Object Detection API].
- Convert the .xml files generated into a collective .csv file.
  <p align="center"><img width="65%" src="https://i.imgur.com/0FrR2cl.png"></p>
- Generate the TFRECORD, label map and configuration files required for training.
- Run the training. Optionally, monitor the progress through [Tensorboard].
- Once a satisfactory loss is reached, the training can be stopped.
- Export the Inference Graph.
- Convert the model to tfjs format using [tensorflowjs_converter].

<br>

### 2b. Training with IBM Cloud
- Convert the .xml files generated into the .json format required by IBM Cloud using [xml2json].
- Upload the training data onto IBM Cloud.
- Initilise training.
- Once training is completed, tfjs format can be downloaded using the [IBM Cloud Interface](cacli).
  ```
  cacli download [model-id] --tfjs
  ```
- The model will be downloaded to the directory cacli.exe is in.


<br>

### 3. Creation of Webpage
- Set up virtual environment with [Flask].
  ```
  pip install flask
  ```
- Create python file to serve the webpage:
  <p align="center"><img width="65%" src="https://i.imgur.com/0FrR2cl.png"></p>
- Use the getUserMedia() function to get the camera feed:
  <p align="center"><img width="65%" src="https://i.imgur.com/ZLABuYf.png"></p>
- Load the model and use it to detect objects within the video feed:
  <p align="center"><img width="65%" src="https://i.imgur.com/MIyTiHI.png"></p>
- Iterate through the data returned by the model and draw the boxes using [openCV.js]:
  <p align="center"><img width="65%" src="https://i.imgur.com/3WktXgz.png"></p>
- Then, depending on the detected hazards, show the respective banners to notify the user:
  <p align="center"><img width="65%" src="https://i.imgur.com/znZ9kZZ.png"></p>

<br>

### 4. Deployment of Model
- Prepare the manifest.yml required by [IBM Cloud Foundry]:
  <p align="center"><img width="45%" src="https://i.imgur.com/KVWdqpx.png"></p>
- Push onto [IBM Cloud Foundry]:
- Clone  the repo and cd to the directory
- Login to IBMCLOUD:
    ```
  ibmcloud login
    ```
- Target a Cloud Foundry Org:
  ```
  ibmcloud target --cf
  ```
- Push the app onto IBM Cloud:
  ```
  ibmcloud cf push
  ```

[Object Detection API]: https://github.com/tensorflow/models/tree/master/research/object_detection
[Flask]: https://palletsprojects.com/p/flask/
[LabelImg]: https://github.com/tzutalin/labelImg
[Tensorboard]: https://www.tensorflow.org/tensorboard/
[tensorflowjs_converter]: https://github.com/tensorflow/tfjs-converter
[xml2json]: https://github.com/cloud-annotations/xml2json/
[cacli]: https://github.com/cloud-annotations/training/releases/
[openCV.js]: https://docs.opencv.org/3.4/d0/d84/tutorial_js_usage.html/
[IBM Cloud Foundry]: https://www.ibm.com/sg-en/cloud/cloud-foundry

<br>

---
<br><br><br><br>
<h3 align="center">Brought to you by Team Willpower</h1>
<p align="center">
  <a href="#">
    <img name="wp" src="https://i.imgur.com/TwjcYs0.png" width="100">
  </a>
</p>
<br><br><br><br><br><br><br><br>